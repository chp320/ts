# 스프링 시큐리티 : OAuth 기반 인증

## 사전 지식 - OAuth 기반 인증
1. 정의 : OAuth는 제3의 서비스에 계정 관리를 맡기는 방식 (ex. 네이버 로그인, 구글 로그인, ..)
2. OAuth 관련 용어 정리
```
* 리소스 오너(resource owner) : 자신의 정보를 사용하도록 '인증 서버'에 허가하는 주체. 서비스를 이용하는 '사용자'가 이에 해당
* 리소스 서버(resource server) : 리소스 오너의 정보를 가지며, 리소스 오너의 정보를 '보호하는 주체'. 네이버/구글/페이스북 등이 이에 해당
* 인증 서버(authorization server) : 클라이언트에게 리소스 오너의 정보에 접근(즉, 리소스 서버에 접근 가능한) 토큰을 발급하는 역할을 하는 application
* 클라이언트 애플리케이션(client application) : 인증 서버에게 '인증'을 받고 리소스 오너의 리소스를 '사용'하는 주체
```
3. 리소스 오너 정보를 취득하는 4가지 방법
  1) 권한 부여 코드 승인 타입 - OAuth 2.0에서 가장 잘 알려진 인증 방법
  2) 암시적 승인 타입
  3) 리소스 소유자 암호 자격증명 승인 타입
  4) 클라이언트 자격증명 승인 타입
4. 정리하자면..
구글, 페이스북, 트위터와 같은 다양한 플랫폼의 특정한 사용자의 데이터에 접근하기 위해 제3자 클라이언트(우리의 서비스)가 "접근 권한을 위임받을"수 있는 표준 프로토콜이다.



## 권한 부여 코드 승인 타입??
- 하기 인증 흐름도 참고
![image](https://github.com/chp320/ts/assets/47440517/521c28ea-73ce-4600-aa4f-76f43ef364dd)



## 사전 지식 - 쿠키
1. 정의 : 사용자가 어떤 웹 사이트를 방문했을 때 웹 사이트가 사용하는 서버에서 사용자의 로컬 환경에 저장하는 작은 데이터를 지칭
2. 구성 : key-value 쌍으로 구성되어 있으며, 만료 기간/도메인 등의 정보를 가지고 있음
   - HTTP 요청을 통해 쿠키의 특정 '키'에 값 추가 가능
   - 쿠기 추가 흐름도
  ![image](https://github.com/chp320/ts/assets/47440517/1ef8023b-af58-4034-8e8b-3a2f6ebbce69)

    * 클라이언트가 정보 요청 시(GET /members), 서버는 정보를 값으로 넣은 '쿠키'를 생성해서 응답(Set-Cookie:member_id=1)
    * 클라이언트는 로컬(즉, 브라우저)에 쿠키 저장
    * 이후 사이트 재 방문 시, 로컬 환경에 있는 쿠키와 함께 서버에 요청
    


  ##### 참고 사이트
  https://hudi.blog/oauth-2.0/

